# ============================================================================
# COUNTERPLAY - ENVIRONMENT VARIABLES
# ============================================================================
# This file contains all environment variables needed for the application.
# Copy this file to .env and fill in your actual values.
#
# SECURITY WARNING:
# - Never commit .env to version control
# - Keep your credentials secure
# - Use different credentials for development/production
# ============================================================================

# ============================================================================
# FIREBASE ADMIN SDK (Server-side only - REQUIRED)
# ============================================================================
# These credentials are used by the Firebase Admin SDK on the server.
# They should NEVER be exposed to the client/browser.
#
# To get these values:
# 1. Go to Firebase Console > Project Settings > Service Accounts
# 2. Click "Generate New Private Key"
# 3. Copy values from the downloaded JSON file
#
# IMPORTANT: The private key must include the escaped newlines (\n)
# If copied from JSON, wrap in quotes and keep the \n characters as-is
# ============================================================================

FIREBASE_PROJECT_ID=your-project-id
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-xxxxx@your-project-id.iam.gserviceaccount.com
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nYour-Private-Key-Here\n-----END PRIVATE KEY-----\n"
FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com

# ============================================================================
# FIREBASE CLIENT SDK (Browser-safe - REQUIRED)
# ============================================================================
# These variables are prefixed with NEXT_PUBLIC_ which makes them available
# in the browser. They are safe to expose as they're public by design.
#
# To get these values:
# 1. Go to Firebase Console > Project Settings > General
# 2. Scroll to "Your apps" section
# 3. Select your web app or create one
# 4. Copy the config values
# ============================================================================

NEXT_PUBLIC_FIREBASE_API_KEY=your-api-key-here
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project-id.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your-sender-id
NEXT_PUBLIC_FIREBASE_APP_ID=your-app-id

# ============================================================================
# FIREBASE DEVELOPMENT TOOLS (Optional)
# ============================================================================
# Enable Firebase Auth Emulator for local development
# Set to "true" to use local emulator instead of production Firebase Auth
# The emulator runs on http://localhost:9099
# ============================================================================

NEXT_PUBLIC_USE_AUTH_EMULATOR=false

# ============================================================================
# OAUTH2 CONFIGURATION (REQUIRED for ChatGPT Apps SDK Integration)
# ============================================================================
# OAuth 2.1 with PKCE configuration for MCP Server authentication
# This enables your MCP server to work with ChatGPT and other OAuth clients
#
# ChatGPT Client Configuration:
# When setting up your app in ChatGPT, use these URLs:
# - Authorization URL: https://your-domain.vercel.app/api/oauth/authorize
# - Token URL: https://your-domain.vercel.app/api/oauth/token
# - Revocation URL: https://your-domain.vercel.app/api/oauth/revoke
# - OAuth Discovery: https://your-domain.vercel.app/api/oauth/.well-known/oauth-authorization-server
# ============================================================================

# OAuth Issuer URL (your deployment URL)
OAUTH_ISSUER_URL=https://your-app.vercel.app

# OAuth Base URL (where OAuth endpoints are hosted)
OAUTH_BASE_URL=https://your-app.vercel.app/api/oauth

# OAuth Authorization Page URL (where users sign in)
OAUTH_AUTHORIZATION_PAGE_URL=https://your-app.vercel.app/auth/authorize

# OAuth Documentation URL
OAUTH_DOCS_URL=https://your-app.vercel.app/docs

# ChatGPT Apps SDK Client ID (default: chatgpt-apps-sdk)
OAUTH_CHATGPT_CLIENT_ID=chatgpt-apps-sdk

# Development Client ID (for local testing)
OAUTH_DEV_CLIENT_ID=counterplay-dev

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
# General application settings
#
# NODE_ENV: Controls app behavior (development, production, test)
# - development: Enables debug logging, detailed errors
# - production: Optimized performance, minimal logging
# - test: For running tests
#
# MCP_SERVER_NAME/VERSION: Model Context Protocol server metadata (optional)
# ============================================================================

NODE_ENV=development
MCP_SERVER_NAME=counterplay
MCP_SERVER_VERSION=1.0.0

# ============================================================================
# DATA SCRAPING CONFIGURATION (Optional)
# ============================================================================
# Configuration for scraping weapon meta data from external sources
# These are used by scripts/scrape-meta.ts and related data sync scripts
# ============================================================================

# WZStats.gg Scraper Configuration
WZSTATS_BASE_URL=https://wzstats.gg
WZSTATS_SCRAPER_ENABLED=true
WZSTATS_CACHE_TTL_HOURS=2
WZSTATS_TIMEOUT_MS=15000

# CODMunity.gg Scraper Configuration
# Provides detailed weapon ballistics including TTK, damage ranges, and recoil patterns
CODMUNITY_BASE_URL=https://codmunity.gg
CODMUNITY_SCRAPER_ENABLED=true
CODMUNITY_CACHE_TTL_HOURS=24
CODMUNITY_TIMEOUT_MS=15000

# ============================================================================
# DATA SOURCE ORCHESTRATOR CONFIGURATION (Optional)
# ============================================================================
# Configuration for the data source orchestrator that coordinates fetching
# from multiple data sources with parallel execution, retry logic, and health monitoring
#
# These settings control how the orchestrator manages data source execution
# across CODArmory, WZStats, and CODMunity sources
# ============================================================================

# Orchestrator Global Settings
# DATA_ORCHESTRATOR_TIMEOUT_MS: Total timeout for all sources (milliseconds)
# Default: 60000 (60 seconds)
DATA_ORCHESTRATOR_TIMEOUT_MS=60000

# DATA_ORCHESTRATOR_MAX_RETRIES: Maximum retry attempts per source on failure
# Default: 3
DATA_ORCHESTRATOR_MAX_RETRIES=3

# DATA_ORCHESTRATOR_PARALLEL_EXECUTION: Execute sources in parallel (true) or sequentially (false)
# Parallel execution is faster but may use more resources
# Default: true
DATA_ORCHESTRATOR_PARALLEL_EXECUTION=true

# ============================================================================
# VALIDATION & TROUBLESHOOTING
# ============================================================================
# The app uses Zod for environment validation. If you see errors on startup:
#
# 1. Check all REQUIRED variables are set (see sections above)
# 2. Ensure FIREBASE_PRIVATE_KEY is properly quoted with \n preserved
# 3. Verify no trailing spaces or extra characters
# 4. Confirm email addresses are valid (FIREBASE_CLIENT_EMAIL)
# 5. Make sure URLs are valid (OAUTH_REDIRECT_URI if used)
#
# For detailed validation errors, check the server logs on startup.
# ============================================================================